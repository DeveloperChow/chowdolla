<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport"
content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
<meta name="theme-color" content="#05060a">
<title>ChowDolla</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
html,body{
  margin:0;
  height:100%;
  background:#05060a;
  color:#fff;
  font-family:-apple-system,system-ui;
  overflow:hidden; /* ğŸš« NO SCROLL */
}
*{-webkit-tap-highlight-color:transparent;box-sizing:border-box}

.safe{
  height:100%;
  display:flex;
  flex-direction:column;
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 16px;
}

.balance{
  font-size:28px;
  font-weight:1000;
}

.leader{
  width:32px;height:32px;
  border-radius:10px;
  background:#1f6bff;
  display:grid;place-items:center;
  font-weight:900;
}

.card{
  background:#0d1220;
  border-radius:22px;
  padding:16px;
  margin:10px 16px;
}

.btn{
  background:#1f6bff;
  color:#fff;
  border:none;
  border-radius:16px;
  padding:14px;
  font-size:16px;
  font-weight:900;
}

.grid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.bonus{
  background:#123cff;
  border-radius:16px;
  padding:14px;
  text-align:center;
  font-weight:900;
}

.bonus small{
  display:block;
  opacity:.6;
  font-size:11px;
}

.nav{
  margin-top:auto;
  display:grid;
  grid-template-columns:repeat(6,1fr);
  gap:8px;
  padding:12px;
  background:#05060a;
}

.nav div{
  background:#0d1220;
  border-radius:14px;
  padding:10px;
  text-align:center;
  font-size:12px;
}

.hidden{display:none}
</style>
</head>

<body>
<div class="safe">

<!-- TOP -->
<div class="topbar">
  <div class="leader" onclick="showLeaderboard()">ğŸ†</div>
  <div class="balance">Â£<span id="bal">0.00</span></div>
  <div style="width:32px"></div>
</div>

<!-- TAP -->
<div class="card">
  <button class="btn" style="width:100%" onclick="tap()">TAP +Â£0.05</button>
</div>

<!-- BONUS -->
<div class="card">
  <div style="font-weight:900;margin-bottom:10px">Bonuses</div>
  <div class="grid">
    <div class="bonus" onclick="bonus(2,600000)">+Â£2<small>10m</small></div>
    <div class="bonus" onclick="bonus(5,1800000)">+Â£5<small>30m</small></div>
    <div class="bonus" onclick="bonus(10,3600000)">+Â£10<small>1h</small></div>
    <div class="bonus" onclick="bonus(20,7200000)">+Â£20<small>2h</small></div>
    <div class="bonus" onclick="bonus(50,21600000)">+Â£50<small>6h</small></div>
    <div class="bonus" onclick="bonus(100,43200000)">+Â£100<small>12h</small></div>
  </div>
</div>

<!-- ADMIN -->
<div class="card hidden" id="admin">
  <div style="font-weight:900">Admin</div>
  <input id="adminAmt" placeholder="Â£ amount"
  style="width:100%;margin:10px 0;padding:12px;border-radius:14px;border:none">
  <button class="btn" onclick="adminAdd()">Add Money</button>
</div>

<!-- NAV -->
<div class="nav">
  <div>Home</div>
  <div>Pay</div>
  <div>Chat</div>
  <div>Jobs</div>
  <div>Assets</div>
  <div onclick="logout()">Me</div>
</div>

</div>

<script>
firebase.initializeApp({
  apiKey:"AIzaSyC7-SKTrNG5kMs5uoem-sun3-wUCtAYQMw",
  authDomain:"chowdolla.firebaseapp.com",
  projectId:"chowdolla"
});
const db=firebase.firestore();

const me=localStorage.getItem("cd_user")||"chowibz"; // demo safe
const ref=db.collection("users").doc(me);
let doc=null;

ref.onSnapshot(s=>{
  if(!s.exists){
    ref.set({balance:0,bonuses:{},isAdmin:me==="chowibz"});
    return;
  }
  doc=s.data();
  bal.textContent=doc.balance.toFixed(2);
  if(doc.isAdmin) admin.classList.remove("hidden");
});

function tap(){
  ref.update({balance:doc.balance+0.05});
}

function bonus(amount,cd){
  const now=Date.now();
  const key="b_"+amount;
  if(doc.bonuses?.[key] && now<doc.bonuses[key]){
    alert("Cooldown");
    return;
  }
  ref.update({
    balance:doc.balance+amount,
    [`bonuses.${key}`]:now+cd
  });
}

function adminAdd(){
  const v=parseFloat(adminAmt.value);
  if(!v||v<=0) return;
  ref.update({balance:doc.balance+v});
  adminAmt.value="";
}

function showLeaderboard(){
  alert("Leaderboard coming next ğŸ‘€");
}

function logout(){
  localStorage.removeItem("cd_user");
  location.reload();
}
</script>
</body>
</html>
